(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{29:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var i=n(23),o=n.n(i),c=(n(29),n(1)),r=n(3),s=n(4),a=n(8),j=n(7),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t*(Math.PI/180)},x=n(2),l=function(t){var e=t.position,n=Object(j.b)((function(){return{args:[1,1,1],position:e,mass:1}})),i=Object(s.a)(n,1)[0];return Object(x.jsxs)("mesh",{ref:i,children:[Object(x.jsx)("boxGeometry",{args:[1,1,1]}),Object(x.jsx)("meshLambertMaterial",{color:"white"})]})},u=function(){var t=Object(j.b)((function(){return{args:[6,6,6],position:[0,-10,0],rotation:[0,b(45),b(45)]}})),e=Object(s.a)(t,1)[0];return Object(x.jsxs)("mesh",{ref:e,children:[Object(x.jsx)("boxGeometry",{args:[6,6,6]}),Object(x.jsx)("meshLambertMaterial",{color:"white"})]})},O=function(){return Object(x.jsxs)(j.a,{children:[Object(x.jsx)(u,{}),Object(x.jsx)(l,{position:[0,0,-2]}),Object(x.jsx)(l,{position:[1,0,-2]}),Object(x.jsx)(l,{position:[2,0,-2]}),Object(x.jsx)(l,{position:[0,0,-1]}),Object(x.jsx)(l,{position:[2,0,-1]}),Object(x.jsx)(l,{position:[2,0,0]}),Object(x.jsx)(l,{position:[1,0,0]}),Object(x.jsx)(l,{position:[0,0,0]}),Object(x.jsx)(l,{position:[3,0,0]}),Object(x.jsx)("directionalLight",{color:"red",intensity:3}),Object(x.jsx)("directionalLight",{color:"yellow",intensity:2,position:[0,0,10]}),Object(x.jsx)("directionalLight",{color:"lightblue",intensity:1,position:[10,0,0]})]})},h={previewContainer:{position:"absolute"},absolutePositionStyle:{position:"absolute",top:0,left:0,right:0,bottom:0}},f=function(t){var e=t.instance,n=Object(c.useState)(!0),i=Object(s.a)(n,2),o=i[0],j=i[1],b=e.Game,l=e.Ui;return Object(c.useEffect)((function(){setTimeout((function(){return j(!1)}),2e3)}),[]),o?Object(x.jsx)(a.a,{style:h.absolutePositionStyle,shadows:!0,camera:{position:[10,10,10]},children:Object(x.jsx)(O,{})}):Object(x.jsxs)("div",{style:h.absolutePositionStyle,children:[Object(x.jsx)(a.a,{style:h.absolutePositionStyle,shadows:!0,camera:{position:[0,8,9]},children:Object(x.jsx)(b,{})}),Object(x.jsx)("div",{style:Object(r.a)(Object(r.a)({},h.absolutePositionStyle),{},{pointerEvents:"none"}),children:Object(x.jsx)(l,{})})]})},d=n(21),p={friction:0,restitution:.9},m=Object(x.jsx)("boxGeometry",{}),_=Object(x.jsx)("meshPhongMaterial",{color:"gray"}),v=function(t){var e=t.position,n=t.onDestroy,i=P((function(t){return t.incrementScores})),o=Object(c.useCallback)((function(){i(),n(e.id)}),[i,n,e]),r=.9,a=Object(j.b)((function(){return{material:p,position:e.position,args:[r,10,r],type:"Kinematic",onCollide:o}})),b=Object(s.a)(a,1)[0];return Object(x.jsxs)("mesh",{ref:b,castShadow:!0,receiveShadow:!0,scale:[r,.8,r],children:[_,m]})},y=function(t){var e=t.level,n=P((function(t){return t})),i=n.currentLevel,o=n.setLevel,r=Object(c.useMemo)((function(){var t=[],n=-2,i=0;return e.split("").forEach((function(e,o){var c=o-i;switch(e){case"x":t.push({id:"brick-".concat(o),position:[c-4,0,n-3]});break;case";":n++,i=o+1}})),t}),[e]),a=Object(c.useState)(r),j=Object(s.a)(a,2),b=j[0],l=j[1];Object(c.useEffect)((function(){0===b.length&&o(i+1)}),[b,o,i]);var u=Object(c.useCallback)((function(t){l(b.filter((function(e){return e.id!==t})))}),[b]);return Object(x.jsx)(c.Fragment,{children:b.map((function(t){return t?Object(x.jsx)(v,{position:t,onDestroy:u},Math.random()):null}))})},g=["\n___x___;\n    ","\nx_____x;\nx_____x;\nx_____x;\n    ","\nx_x_x_x;\n_x_x_x_;\nx_x_x_x;\n_x_x_x_;\nx_x_x_x;\n    ","\nxxxxxxx;\n__xxx__;\nxxxxxxx;\nx_x_x_x;\n    ","\nx_x_x_x;\nx_x_x_x;\nx_x_x_x;\nx_x_x_x;\nx_x_x_x;\n    "],S=[3,.2,.6],w=function(){var t=Object(j.b)((function(){return{args:S,position:[0,0,6],type:"Kinematic",material:p}})),e=Object(s.a)(t,2),n=e[0],i=e[1];return Object(a.b)((function(t){i.position.set(5*t.mouse.x,0,7-2*Math.abs(t.mouse.x)),i.rotation.set(0,t.mouse.x,0)})),Object(x.jsxs)("mesh",{ref:n,castShadow:!0,receiveShadow:!0,children:[Object(x.jsx)("boxGeometry",{args:S}),Object(x.jsx)("meshStandardMaterial",{color:"gray"})]})},L=function(){return Object(x.jsxs)("mesh",{receiveShadow:!0,position:[0,0,0],rotation:[b(-90),0,0],children:[Object(x.jsx)("planeGeometry",{args:[10,30,1]}),Object(x.jsx)("meshStandardMaterial",{color:"white"})]})},M=function(){var t=Object(c.useRef)(!0),e=P(),n=e.setLevel,i=e.currentLevel,o=Object(j.c)((function(){return{mass:1e-11,args:.2,fixedRotation:!0,material:p}})),r=Object(s.a)(o,2),a=r[0],b=r[1];return Object(c.useEffect)((function(){t.current=!0,b.velocity.set(0,0,1),b.position.set(0,0,2)}),[b,i]),Object(c.useEffect)((function(){b.velocity.subscribe((function(e){var n=Object(s.a)(e,3),i=n[0],o=(n[1],n[2]);if(!t.current){var c=Math.abs(i)<8&&Math.abs(o)<8;b.velocity.set(c?1.1*i:i,0,c?1.1*o:o)}})),b.position.subscribe((function(e){var i=Object(s.a)(e,3),o=i[0],c=(i[1],i[2]);t.current?t.current=!1:(b.position.set(o,0,c),c>9&&n(-1))}))}),[b,n,t]),Object(x.jsxs)("mesh",{ref:a,castShadow:!0,receiveShadow:!0,children:[Object(x.jsx)("sphereGeometry",{args:[.2,10,10]}),Object(x.jsx)("meshStandardMaterial",{color:"#F76242"})]})},k=function(t){var e=t.type,n=t.position,i="horizontal"===e?[20,1,2]:[2,1,20],o=Object(j.b)((function(){return{type:"Kinematic",args:i,material:p,position:n}})),c=Object(s.a)(o,1)[0];return Object(x.jsxs)("mesh",{ref:c,castShadow:!0,receiveShadow:!0,children:[Object(x.jsx)("boxGeometry",{args:i}),Object(x.jsx)("meshStandardMaterial",{color:"white"})]})},G=function(){return Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(k,{type:"horizontal",position:[0,0,-9]}),Object(x.jsx)(k,{type:"vertical",position:[-5,0,0]}),Object(x.jsx)(k,{type:"vertical",position:[5,0,0]})]})},C={buttons:{display:"flex",flexDirection:"column",marginTop:"30%"},button:{fontWeight:"bold",fontSize:25,border:"none",margin:10,padding:10,pointerEvents:"all"}},E=function(){var t=P((function(t){return t.setLevel})),e=Object(c.useCallback)((function(){t(0)}),[t]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{style:Object(r.a)(Object(r.a)({},F.basicText),F.titleBig),children:"<JustArcanoid />"}),Object(x.jsxs)("div",{style:C.buttons,children:[Object(x.jsx)("button",{style:C.button,onClick:e,children:"Start"}),Object(x.jsx)("button",{style:C.button,children:"Options"})]})]})},F={basicText:{fontFamily:"Skia",color:"white",backgroundColor:"#F76242",padding:10},titleBig:{fontWeight:"bold",fontSize:48,transform:"rotate(13deg)"}},P=Object(d.a)((function(t){return{scores:0,currentLevel:-1,incrementScores:function(){return t((function(t){return{scores:t.scores+1}}))},setLevel:function(e){return t((function(){return{currentLevel:e}}))}}})),z={Ui:function(){var t=P(),e=t.scores,n=t.currentLevel;return Object(x.jsxs)("div",{style:{margin:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[-1===n&&Object(x.jsx)(E,{}),Object(x.jsxs)("p",{style:F.basicText,children:["Score: ",e]})]})},Game:function(){var t=P((function(t){return t.currentLevel}));return-1===t?null:Object(x.jsx)(c.Fragment,{children:Object(x.jsxs)(j.a,{gravity:[0,0,0],tolerance:0,allowSleep:!0,size:100,iterations:1,children:[Object(x.jsx)("ambientLight",{intensity:.5}),Object(x.jsx)("directionalLight",{castShadow:!0,position:[5,2,5],intensity:1}),Object(x.jsx)(y,{level:g[t]},t),Object(x.jsx)(w,{}),Object(x.jsx)(M,{}),Object(x.jsx)(G,{}),Object(x.jsx)(L,{})]})})}};function T(){return Object(x.jsx)(c.Fragment,{children:Object(x.jsx)(f,{instance:z})})}o.a.render(Object(x.jsx)(T,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.85b3c568.chunk.js.map